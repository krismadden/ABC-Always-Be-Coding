<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.7.2/p5.js"></script>

<style type="text/css">body{ margin: 0;}</style>

<script>

let Triangles = [];
let Rectangles = [];
let Squares = [];
let grid;

let Purple, Pink, Teal, Cyan, Slate, Background, Stroke;
Purple = "#807DB5";
Background = "#F2E4DD";
Pink = "#F96997";
Teal = "#5F919B";
Slate = "#8CA3A4";
Cyan = "#87CBD0";
Test = "white";
Stroke = Test;
let rotate1 = 0;
let rotate2 = 0;

function setup() {
  createCanvas(windowWidth, windowHeight);
  grid = windowWidth/5;
  for (let x = 0; x < windowWidth; x += grid) {
    for (let y = 0; y < windowHeight; y += grid) {
      let xUpdate = x + grid / 2;
      let yUpdate = y + grid / 2;
      var t = new Triangle(xUpdate, yUpdate, 30, Purple, Pink, 20);
      Triangles.push(t);
       var r = new Rectangle(xUpdate, yUpdate, 15, 65, Purple, Test, 0, 40);
      Rectangles.push(r);
      var s = new Rectangle(xUpdate, yUpdate, 15, 15, Stroke, Teal, 0, 60);
      Squares.push(s);
    }
  }
}

function draw() {
  background(Background);

  for (let i = 0; i < Triangles.length; i++) {
    Rectangles[i].display();
    Triangles[i].move();
    Triangles[i].display();
    Squares[i].display();
  }
}

function Triangle(cCenterX, cCenterY, cDistance, cColor1, cColor2, cShadow) {
  this.randoX = random(-0, 0);
  this.randoY = random(-0, 0);
  this.centerX = cCenterX;
  this.centerY = cCenterY;
  this.rotat = random(0, 0);
  this.x1 = this.randoX;
  this.y1 = this.randoY - ((5 / 12) * sqrt(3) * cDistance);
  this.x2 = cDistance + this.randoX;
  this.y2 = cDistance + this.randoY;
  this.x3 = this.randoX - cDistance;
  this.y3 = cDistance + this.randoY;
  this.c1 = color(cColor1);
  this.c2 = color(cColor2);
  this.Shadow = cShadow;


  this.move = function() {
    rotate1 += HALF_PI/360;
  }

  this.display = function() {
    push();
    translate(this.centerX, this.centerY);
    rotate(this.rotat + sin(rotate1));
    fill(this.c1);
    beginShape();
    vertex(20, -5);
    vertex(20, -50);
    vertex(40, -50);
    vertex(40, 10);
    vertex(5, 20);
    vertex(5, 70);
    vertex(-15, 70);
    vertex(-15, 5);
    vertex(20, -5);
    endShape();
    pop();

  }
}

function Rectangle(cCenterX, cCenterY, cHeight, cWidth, cColor1, cColor2, cStroke, cRandom) {
  this.randoX = random(-cRandom, cRandom);
  this.randoY = random(-cRandom, cRandom);
  this.centerX = cCenterX;
  this.centerY = cCenterY;
  this.rotat = random(0,360);
  this.x = 0 + this.randoX;
  this.y = 0 + this.randoY;
  this.h = cHeight;
  this.w = cWidth;
  this.c1 = color(cColor1);
  this.c2 = color(cColor2);
  this.strok = cStroke;
  
  
  this.move = function() {
    rotate2 += 50;
  }
  
  this.display = function() {
    push();
    translate(this.centerX, this.centerY);
    rotate(this.rotat + rotate2);
    stroke(this.c1);
    strokeWeight(this.strok);
    rectMode(CENTER);
    fill(this.c2);
    rect(this.x, this.y, this.w, this.h);
    pop();
    
  }
}

</script>